# This Source Code Form is subject to the terms of the Mozilla Public
# License, v. 2.0. If a copy of the MPL was not distributed with this
# file, You can obtain one at http://mozilla.org/MPL/2.0/.

# forward all syslog data to the aggregation server 
# (via TCP because of the second @)

# add PID into msg because papertrail doesn't show it
$SystemLogUsePIDFromSystem on
$template PIDInMsgTemplate, "<%pri%>%timestamp% %hostname% %syslogtag% [%syslogtag:R,ERE,1,BLANK,0:\[([0-9]{1,5})\]--end%]%msg%\n"
$ActionForwardDefaultTemplate PIDInMsgTemplate

*.* @@<%= @log_aggregator %>:<%= @logging_port %>

